GDPColor_CWR <- c("#6B8033", "#020303", "#0D77B9")
plotScatterPie(GDPmix, pieRange = 4:6, pieColor = GDPColor_CWR)
plotScatterPie(res, pieRange = 4:6, pieColor = GDPColor_CWR)
plotScatterPie(res[1:7], pieRange = 4:6, pieColor = GDPColor_CWR)
plotScatterPie(res[1:7,], pieRange = 4:6, pieColor = GDPColor_CWR)
devtools::check(cran = T)
debug(plotScatterPie)
plotScatterPie(res[1:7,], pieRange = 4:6, pieColor = GDPColor_CWR)
i
devtools::check(cran = T)
plotScatterPie(res[1:7,], pieRange = 4:6, pieColor = GDPColor_CWR)
plotScatterPie(res[15:23,], pieRange = 4:6, pieColor = GDPColor_CWR)
devtools::check(cran = T)
plotScatterPie(res[15:23,], pieRange = 4:6, pieColor = GDPColor_CWR)
plotScatterPie(res[15:23,], pieRange = 4:6, pieColor = GDPColor_CWR)
devtools::check(cran = T)
plotScatterPie(res[15:23,], pieRange = 4:6, pieColor = GDPColor_CWR)
shiny::runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
plotScatterPie(res[15:23,], pieRange = 4:6, pieColor = GDPColor_CWR)
devtools::install_github('Yuanchao-Xu/gfer')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
plotScatterPie(res[15:23,], pieRange = 4:6, pieColor = GDPColor_CWR)
library(gfer)
plotScatterPie(res[15:23,], pieRange = 4:6, pieColor = GDPColor_CWR)
shiny::runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
res
input$province
input$province
a
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
plot(1:5)
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/getPPPList')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
res
plotYear
input$plotYear
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
devtools::check(cran = T)
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
debug(plotScatterPie)
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
data
str(data)
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
a
data()
runApp()
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
a
data()
a
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
res
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
a
res
province
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
input$plotYear
input$province
data
runApp('C:/Users/user/Google Drive/CWR/R/Provincial_waternomics')
res$Year
library(shiny); runApp('C:/Users/User/Google Drive/CWR/R/test.R')
runApp('C:/Users/User/Google Drive/CWR/R/test.R')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
library(gfer)
devtools::install_github('Yuanchao-Xu/gfer')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
input
input$plotYear
shinyApp(ui=ui,server=server)
library(shiny)
server <- shinyServer(function(input, output) {
etext <- eventReactive(input$evReactiveButton, {
runif(1)
})
observeEvent(input$obsEventButton,{
output$oText <- renderText({ runif(1) })
})
eventReactive(input$evReactiveButton2,{
print("Will not print")
output$oText <- renderText({ runif(1) })
})
output$eText <- renderText({
etext()
})
})
ui <- shinyUI(pageWithSidebar(
headerPanel("eventReactive and observeEvent"),
sidebarPanel(
actionButton("evReactiveButton", "eventReactive"),
br(),
actionButton("obsEventButton", "observeEvent"),
br(),
actionButton("evReactiveButton2", "eventReactive2")
),
mainPanel(
verbatimTextOutput("eText"),
verbatimTextOutput("oText")
)
))
shinyApp(ui=ui,server=server)
shinyApp(ui=ui,server=server)
shinyApp(ui, server)
observeEvent(
input$rnorm,
{
v$data<-rnorm(100)
}
)
output$plot <- renderPlot(
{
if (is.null(v$data)) return()
hist(v$data)
}
)
shinyApp(ui, server)
library(shiny)
ui<-fluidPage(
actionButton("runif", "uniform"),
actionButton("rnorm", "Normal"),
hr(),
plotOutput("plot")
)
server<-function(input, output){
v<-reactiveValues(data=NULL)
observeEvent(
input$runif,
{
v$data<-runif(100)
}
)
observeEvent(
input$rnorm,
{
v$data<-rnorm(100)
}
)
output$plot <- renderPlot(
{
if (is.null(v$data)) return()
hist(v$data)
}
)
}
shinyApp(ui, server)
## Only run examples in interactive R sessions
if (interactive()) {
ui <- fluidPage(
sliderInput("controller", "Controller", 0, 1, 0, step = 1),
checkboxInput("inCheckbox", "Input checkbox")
)
server <- function(input, output, session) {
observe({
# TRUE if input$controller is odd, FALSE if even.
x_even <- input$controller %% 2 == 1
updateCheckboxInput(session, "inCheckbox", value = x_even)
})
}
shinyApp(ui, server)
}
shinyApp(ui, server)
## Only run examples in interactive R sessions
if (interactive()) {
ui <- fluidPage(
p("The first checkbox group controls the second"),
checkboxGroupInput("inCheckboxGroup", "Input checkbox",
c("Item A", "Item B", "Item C")),
checkboxGroupInput("inCheckboxGroup2", "Input checkbox 2",
c("Item A", "Item B", "Item C"))
)
server <- function(input, output, session) {
observe({
x <- input$inCheckboxGroup
# Can use character(0) to remove all choices
if (is.null(x))
x <- character(0)
# Can also set the label and select items
updateCheckboxGroupInput(session, "inCheckboxGroup2",
label = paste("Checkboxgroup label", length(x)),
choices = x,
selected = x
)
})
}
shinyApp(ui, server)
}
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
library(shiny)
library(stringr)
dynamic_choices = c(1:33)
dynamic_choices = str_pad(as.character(dynamic_choices), 2, side="left", pad="0")
selection = list("South"=c("02","03","05","06","09","13","16","17","18","21","28","29","32"),
"North"=c("01","04","07","08","10","11","12","19","22","23","24","25","26","27","30","31","33"),
"East"=c("14","15","20"))
ui <- shinyUI(fluidPage(
titlePanel("Update CheckboxGroupInput"),
sidebarLayout(
sidebarPanel(
checkboxGroupInput("county", "County", c("South", "North", "East")),
checkboxGroupInput("dynamic", "Dynamic", dynamic_choices)
),
mainPanel(
)
)
))
server <- shinyServer(function(session, input, output) {
observeEvent(input$county, {
selected = c()
for (s in input$county) {
selected = c(selected, selection[[s]])
}
# This is needed due to a bug in Shiny, see https://github.com/rstudio/shiny/issues/831
if (is.null(selected)) {
selected = character(0)
}
updateCheckboxGroupInput(session, "dynamic", selected = selected)
}, ignoreNULL = FALSE)
})
shinyApp(ui = ui, server = server)
runApp('C:/Users/User/Google Drive/CWR/R/New folder')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
res <- data(GDPmix)
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
str(res)
res$data
dataset$data
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
res$data
Q
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
data()
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
input$Year
input$province
dataset()
res()
data()
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
data()
res1
res1()
res()
dataset()
dataset()
res1
res()
res1()
res1()
res()
res()
res()
res
res()
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
plotData()
input$plotYear
next()
dataset()
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
dataset()
res
res
input$province
input$province
input$province
plotData()
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
debug(plotScatterPie)
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
data
pieRange
data
runApp('C:/Users/User/Google Drive/CWR/R/test.R')
source('C:/Users/User/Google Drive/CWR/R/test.R')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
data
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
res
colnames(res)
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
data
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
res
res$label == input$province
res$label
dataset()
dataset()$label
getWaternomicsData(2014, 2015)
debug(getNBS)
getNBS('GDP', 2014, 2015)
n1
GDP_total
rownames(a)
GDP_total$Province
strsplit(GDP_total$Province[1],'.')
?strsplit
x = c("abcde", "ghij", "klmnopq")
x
strsplit(x, "", fixed=TRUE)
base::strsplit(GDP_total$Province[1],'.')
strsplit(GDP_total$Province[1],'.')
GDP_total$Province[1]
strsplit(GDP_total$Province[1], '.')
strsplit(GDP_total$Province[1], 'B')
strsplit(GDP_total$Province[1], '\.')
strsplit(GDP_total$Province[1], '/.')
strsplit(GDP_total$Province[1], '1.')
strsplit(GDP_total$Province[1], '1.')[[2]]
strsplit(GDP_total$Province[1], '1.')[[1]][2]
strsplit(GDP_total$Province[1], '\\.')[[2]]
strsplit(GDP_total$Province[1], '\\.')
strsplit(GDP_total$Province[1], '\\.')[[1]][2]
strsplit(GDP_total$Province, '\\.')[[1]][2]
sapply(GDP_total$Province, function (x) strsplit(x, '\\.')[[1]][2])
a <- sapply(GDP_total$Province, function (x) strsplit(x, '\\.')[[1]][2])a
a <- sapply(GDP_total$Province, function (x) strsplit(x, '\\.')[[1]][2])
str(a)
names(a)
names(a) <- NULL
devtools::check(cran = T)
devtools::check(cran = T)
devtools::install_github('Yuanchao-Xu/gfer')
library(gfer)
updateNBS(2013,2015)
shiny::runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
res
res$label == input$province
res$label
input$province
match(res$label,input$province)
match(input$province, res$label,)
match(input$province, res$label)
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
res
res$label
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
res
res
devtools::install_github('Yuanchao-Xu/gfer')
shiny::runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
devtools::check(cran = T)
devtools::check(cran = T)
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
updateNBS(2005, 2015)
updateNBS(2005, 2015)
debug(updateNBS)
updateNBS(2005, 2015)
undebug(updateNBS)
updateNBS(2010, 2015)
updateNBS(2010, 2015)
updateNBS <- function(start, end) {
message('Loading from NBS')
GDP <- getNBS('GDP', start, end)
wateruse <- getNBS('water use', start, end)
wastewater <- getNBS('wastewater', start, end)
#check if there are existing data base in the drive
message('Uploading to Google Sheet. It may take minites depending on data size.')
if (!'NBS_data' %in% gs_ls()[['sheet_title']]) {
gs_new('NBS_data', ws_title = 'GDP', input = GDP, trim = TRUE, verbose = FALSE)
} else {
gs_edit_cells(gs_title('NBS_data'), ws = 'GDP', input = GDP, trim = TRUE, verbose = TRUE)
}
sheet <- gs_title('NBS_data')
message('GDP upload finished.')
gs_edit_cells(sheet, ws = 'Water_use', input = wateruse, trim = TRUE, verbose = TRUE)
message('water use upload finished.')
gs_edit_cells(sheet, ws = 'Wastewater', input = wastewater, trim = TRUE, verbose = TRUE)
message('Wastewater upload finished.')
message('All finished')
}
library(googlesheets)
GDP <- getNBS('GDP', start, end)
start <- 2014
end <- 2015
GDP <- getNBS('GDP', start, end)
wateruse <- getNBS('water use', start, end)
wastewater <- getNBS('wastewater', start, end)
library(gfer)
updateNBS <- function(start, end) {
message('Loading from NBS')
GDP <- getNBS('GDP', start, end)
wateruse <- getNBS('water use', start, end)
wastewater <- getNBS('wastewater', start, end)
#check if there are existing data base in the drive
message('Uploading to Google Sheet. It may take minites depending on data size.')
if (!'NBS_data' %in% gs_ls()[['sheet_title']]) {
gs_new('NBS_data', ws_title = 'GDP', input = GDP, trim = TRUE, verbose = FALSE)
gs_ws_new(gs_title('NBS_data'), ws_title = 'Water_use')
gs_ws_new(gs_title('NBS_data'), ws_title = 'Wastewater')
} else {
gs_edit_cells(gs_title('NBS_data'), ws = 'GDP', input = GDP, trim = TRUE, verbose = TRUE)
}
sheet <- gs_title('NBS_data')
message('GDP upload finished.')
gs_edit_cells(sheet, ws = 'Water_use', input = wateruse, trim = TRUE, verbose = TRUE)
message('water use upload finished.')
gs_edit_cells(sheet, ws = 'Wastewater', input = wastewater, trim = TRUE, verbose = TRUE)
message('Wastewater upload finished.')
message('All finished')
}
updateNBS(2014, 2015)
updateNBS <- function(start, end) {
message('Loading from NBS')
GDP <- getNBS('GDP', start, end)
wateruse <- getNBS('water use', start, end)
wastewater <- getNBS('wastewater', start, end)
#check if there are existing data base in the drive
message('Uploading to Google Sheet. It may take minites depending on data size.')
if (!'NBS_data' %in% gs_ls()[['sheet_title']]) {
gs_new('NBS_data', ws_title = 'GDP', input = GDP, trim = TRUE, verbose = TRUE)
gs_ws_new(gs_title('NBS_data'), ws_title = 'Water_use', trim = TRUE, verbose = TRUE)
gs_ws_new(gs_title('NBS_data'), ws_title = 'Wastewater')
} else {
gs_edit_cells(gs_title('NBS_data'), ws = 'GDP', input = GDP, trim = TRUE, verbose = TRUE)
}
sheet <- gs_title('NBS_data')
message('GDP upload finished.')
gs_edit_cells(sheet, ws = 'Water_use', input = wateruse, trim = TRUE, verbose = TRUE)
message('water use upload finished.')
gs_edit_cells(sheet, ws = 'Wastewater', input = wastewater, trim = TRUE, verbose = TRUE)
message('Wastewater upload finished.')
message('All finished')
}
updateNBS(2013, 2015)
shiny::runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
getWaternomicsData <- function(start, end, url_GDP = NULL, url_wateruse = NULL, url_wastewater = NULL) {
if(is.null(url_GDP)) url_GDP <- 'https://docs.google.com/spreadsheets/d/1ns2eHOkkyKzV4sSa4ECohL7kxnmjRquW6xPsPz-I8ew/edit#gid=0'
if(is.null(url_wateruse)) url_wateruse <- 'https://docs.google.com/spreadsheets/d/1ns2eHOkkyKzV4sSa4ECohL7kxnmjRquW6xPsPz-I8ew/edit#gid=124360177'
if(is.null(url_wastewater)) url_wastewater <- 'https://docs.google.com/spreadsheets/d/1ns2eHOkkyKzV4sSa4ECohL7kxnmjRquW6xPsPz-I8ew/edit#gid=645349937'
closeAllConnections()
selected <- c('Province', 'Year','Gross Regional Product', 'Value-added of the Primary Industry', 'Value-added of the Secondary Industry',
'Value-added of the Tertiary Industry')
GDP <- gsheet2tbl(url_GDP)[, selected]
selected <- c('Province', 'Year', 'Total Use of Water')
wateruse <- gsheet2tbl(url_wateruse)[, selected]
selected <- c('Province', 'Year', 'Total Waste Water Discharged')
wastewater <- gsheet2tbl(url_wastewater)[, selected]
res <- cbind(GDP, wateruse[, 3], wastewater[,3])
# calculate x and y coordinates
res$x <- res[, 8]/res[, 3]
res$y <- res[, 7]/res[, 3]*10000
res$r <- res[, 3]
colnames(res)[1] <- 'label'
# need further development
return(res)
}
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
library(gsheet)
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
debug(plotScatterPie)
runApp('C:/Users/User/Google Drive/CWR/R/Provincial_waternomics')
xlim
data
i
(max(data$x1) - min(data$x1))/i
devtools::check(cran = T)
